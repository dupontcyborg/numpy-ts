---
title: "Decompositions"
description: "Eigenvalue, singular value, QR, and Cholesky matrix decompositions."
---

All decomposition functions live under the `linalg` namespace. Access them as `np.linalg.eig(...)`, `np.linalg.svd(...)`, etc.

### linalg.eig

Compute the eigenvalues and right eigenvectors of a square matrix. For each eigenvalue `w[i]`, the corresponding eigenvector is the column `v[:, i]`.

```typescript
function linalg.eig(a: ArrayLike): [NDArray, NDArray]
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input square matrix. |

**Returns:** `[NDArray, NDArray]` -- A tuple `[eigenvalues, eigenvectors]` where `eigenvalues` has shape `[n]` and `eigenvectors` has shape `[n, n]`. The column `eigenvectors[:, i]` is the eigenvector corresponding to `eigenvalues[i]`.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[1, -1], [1, 1]]);

const [values, vectors] = np.linalg.eig(A);
console.log(values.shape);    // [2]
console.log(vectors.shape);   // [2, 2]
```

---

### linalg.eigh

Compute eigenvalues and eigenvectors of a symmetric (Hermitian) matrix. The eigenvalues are returned in ascending order. This is faster than `eig` for symmetric matrices and guarantees real eigenvalues.

```typescript
function linalg.eigh(a: ArrayLike, UPLO?: 'L' | 'U'): [NDArray, NDArray]
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input symmetric matrix. |
| `UPLO` | `'L' \| 'U'` | `'L'` | Whether to use the lower (`'L'`) or upper (`'U'`) triangle of `a`. |

**Returns:** `[NDArray, NDArray]` -- A tuple `[eigenvalues, eigenvectors]`. Eigenvalues are sorted in ascending order. Eigenvectors are orthonormal.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[2, 1], [1, 3]]);

const [values, vectors] = np.linalg.eigh(A);
console.log(values.toArray());  // eigenvalues in ascending order
console.log(vectors.shape);     // [2, 2]
```

---

### linalg.eigvals

Compute the eigenvalues of a square matrix. This is equivalent to `linalg.eig` but only returns eigenvalues, which can be more efficient when eigenvectors are not needed.

```typescript
function linalg.eigvals(a: ArrayLike): NDArray
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input square matrix. |

**Returns:** `NDArray` -- 1-D array of eigenvalues (may be complex-valued).

```typescript
import * as np from 'numpy-ts';

const A = np.array([[1, 2], [3, 4]]);

const w = np.linalg.eigvals(A);
console.log(w.shape);  // [2]
```

---

### linalg.eigvalsh

Compute the eigenvalues of a symmetric (Hermitian) matrix. Returns eigenvalues only, sorted in ascending order.

```typescript
function linalg.eigvalsh(a: ArrayLike, UPLO?: 'L' | 'U'): NDArray
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input symmetric matrix. |
| `UPLO` | `'L' \| 'U'` | `'L'` | Whether to use the lower or upper triangle. |

**Returns:** `NDArray` -- 1-D array of real eigenvalues in ascending order.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[5, 2], [2, 8]]);

const w = np.linalg.eigvalsh(A);
console.log(w.toArray());  // eigenvalues in ascending order
```

---

### linalg.svd

Compute the singular value decomposition (SVD) of a matrix. Factors the matrix `a` as `U @ diag(S) @ Vh`.

```typescript
function linalg.svd(a: ArrayLike, full_matrices?: boolean): [NDArray, NDArray, NDArray]
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input matrix of shape `[M, N]`. |
| `full_matrices` | `boolean` | `true` | If `true`, `U` is `[M, M]` and `Vh` is `[N, N]`. If `false`, `U` is `[M, K]` and `Vh` is `[K, N]` where `K = min(M, N)`. |

**Returns:** `[NDArray, NDArray, NDArray]` -- A tuple `[U, S, Vh]` where `U` contains the left singular vectors, `S` contains the singular values (in descending order), and `Vh` contains the right singular vectors (conjugate-transposed).

```typescript
import * as np from 'numpy-ts';

const A = np.array([[1, 0, 0], [0, 2, 0], [0, 0, 3]]);

const [U, S, Vh] = np.linalg.svd(A);
console.log(S.toArray());  // [3, 2, 1]

// Reduced SVD
const [Ur, Sr, Vhr] = np.linalg.svd(A, false);
console.log(Ur.shape);   // [3, 3]
console.log(Sr.shape);   // [3]
console.log(Vhr.shape);  // [3, 3]
```

---

### linalg.svdvals

Compute the singular values of a matrix. This is equivalent to `linalg.svd` but only returns the singular values, which can be more efficient.

```typescript
function linalg.svdvals(a: ArrayLike): NDArray
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input matrix. |

**Returns:** `NDArray` -- 1-D array of singular values in descending order.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[1, 2], [3, 4]]);

const s = np.linalg.svdvals(A);
console.log(s.shape);  // [2]
```

---

### linalg.qr

Compute the QR decomposition of a matrix. Factors the matrix `a` as `Q @ R`, where `Q` is orthogonal and `R` is upper triangular.

```typescript
function linalg.qr(a: ArrayLike, mode?: 'reduced' | 'complete'): [NDArray, NDArray]
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input matrix of shape `[M, N]`. |
| `mode` | `'reduced' \| 'complete'` | `'reduced'` | If `'reduced'`, returns `Q` of shape `[M, K]` and `R` of shape `[K, N]` where `K = min(M, N)`. If `'complete'`, returns the full `Q` of shape `[M, M]`. |

**Returns:** `[NDArray, NDArray]` -- A tuple `[Q, R]`.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[1, 2], [3, 4], [5, 6]]);

// Reduced QR (default)
const [Q, R] = np.linalg.qr(A);
console.log(Q.shape);  // [3, 2]
console.log(R.shape);  // [2, 2]

// Complete QR
const [Qf, Rf] = np.linalg.qr(A, 'complete');
console.log(Qf.shape);  // [3, 3]
console.log(Rf.shape);  // [3, 2]
```

---

### linalg.cholesky

Compute the Cholesky decomposition of a positive-definite symmetric matrix. Returns the lower-triangular matrix `L` such that `a = L @ L.T`.

```typescript
function linalg.cholesky(a: ArrayLike): NDArray
```

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `a` | `ArrayLike` | -- | Input positive-definite symmetric matrix. |

**Returns:** `NDArray` -- Lower-triangular Cholesky factor `L`.

**Throws:** `Error` if the matrix is not positive definite.

```typescript
import * as np from 'numpy-ts';

const A = np.array([[4, 2], [2, 3]]);

const L = np.linalg.cholesky(A);
// array([[2, 0],
//        [1, 1.41421356]])

// Verify: L @ L.T â‰ˆ A
const reconstructed = np.matmul(L, L.T);
```
